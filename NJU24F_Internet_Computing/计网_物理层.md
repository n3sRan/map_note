# 物理层 

[TOC]

## 通信基础

信源: 信号来源, 数据的发送方

信宿: 信号"归宿", 数据的接收方

信号: 数据的载体

- 数字信号: 值是离散的 (电压)
- 模拟信号: 值是连续的 (电磁波)

信道: 信号的通道, 有数字信道和模拟信道

码元: 一个周期内可能出现几种信号? 每一类信号就是一个码元, "码元宽度"指一个信号周期的长度

码元和比特的对应关系: 一个周期内可能出现$2^K$种信号, 则 1码元 = Kbit

速率

- 波特率: 每秒传输几个码元, 单位: 码元/秒, 或 波特 Baud
- 比特率: 每秒传输几个比特, 单位: bit/s
- 若一个码元携带了n比特的信息, 则 M Baud = Mn b/s

## 信道的极限容量

带宽: 信道允许通过的信号频带范围, 单位: Hz

噪声: 噪声会影响信道的数据传输效果

### 奈奎斯特定理 (奈式准则)

Nyquist 定理

对于一个**理想低通信道** (没有噪声, 带宽有限的信道), **极限波特率** = 2W (单位: 波特, 即码元/秒)

- W是信道的频率带宽 (单位: Hz)

如果有$2^K$种信号. 则极限比特率 = 2W K b/s

 说明

- 如果波特率太高, 会导致**码间串扰**, 即接收方无法识别码元
- 带宽越大, 信道传输码元的能力越强
- 并未对一个码元最多可以携带多少比特做出解释

### 香农定理

对于一个**有噪声**, 带宽有限的信道

**极限比特率** = $W \log_{2}(1 + S/N)$ (单位: b/s)

- W是信道的频率带宽 (单位: Hz)
- S/N **信噪比** = 信号的功率/噪声的功率 (无单位) = $10 \log_{10}S/N$ (单位: 分贝 dB), 计算时要将信噪比转换为无单位的形式

说明

- 提升信道带宽, 加强信号功率, 降低噪声功率, 都可以提高信道的极限比特率
- 结合奈式准则可知, 在带宽, 信噪比确定的信道上, 一个码元可以携带的**比特数**是有上限的

## 编码和调制

### 概念

变换器: 将二进制数据转换为信号

反变换器: 将信号转换为二进制数据

**编码**: 二进制数据→数字信号, 逆过程为**解码**

**调制**: 二进制数据→模拟信号, 逆过程为解调

有线网络适配器: 编码-解码器

光猫: 调制-解调器

### 编码技术

#### 不归零编码 NRZ

- 低0高1, 中不变

#### 归零编码 RZ

- 低0高1, 中归零

#### 反向非归零编码 NRZI

- Non-Return-to-Zero Inverted
- 跳0不跳1, 看起点, 中不变
- 在前面补一段线

#### 曼彻斯特编码

- 跳0反跳1,看中间, 中必变
- 一般上0下1 (IEEE), 也有上1下0

#### 差分曼彻斯特编码

- 跳0不跳1,看起点, 中必变
- 在前面补一段线

#### 各种编码特点

- 自同步能力: 信源和新宿可以根据信号完成"节奏同步", 无需时钟信号. (归零, 曼彻斯特, 差分曼彻斯特) (反向非归零: 若增加冗余位 (8+1bit) 可支持自同步)
- 浪费带宽:  归零, 曼彻斯特, 差分曼彻斯特 (反向非归零: 只浪费一点带宽)
- 抗干扰能力: 曼彻斯特和差分曼彻斯特较强, 其余较弱

### 调制技术

调幅 AM

- 又名 幅移键控 ASK
- 调制正弦波的**振幅**来区分不同信号
- 若设置$2^K$个幅值, 则 1码元 = K bit

调配 FM

- 又名  频移键控 FSK
- 调制正弦波的频率来区分不同信号
- 若设置$2^K$个频率, 则 1码元 = K bit

调相 PM

- 又名  相移键控 PSK
- 调制正弦波的**相位**来区分不同信号 (例如 $y = \sin(x + 0)$表示二进制的0, $y = \sin(x+ \pi)$表示二进制的1)
- 若设置$2^K$个相位, 则 1码元 = K bit

正交幅度调制 QAM

- 将AM, PM结合起来, 形成叠加信号
- 若设置m种幅值, n种相位, 则可调制出m*n种信号, 则 1 码元 = $\log_{2}mn$ bit

## 传输介质

### 导向型

双绞线

- 有屏蔽层: 屏蔽双绞线 (STP, Shielded Twisted Pair)
- 没有屏蔽层: 非屏蔽双绞线 (UTP, Unshielded Twisted Pair)
- 抗干扰能力: 一般
- 提升绞合度, 增加屏蔽层: 提升抗电磁干扰能力, 降低信道噪声功率, 提升信道极限速率 (香农定理)
- 应用: 近些年的局域网, 早期电话线

同轴电缆

- 内导体 (用于传输信号) + 外导体屏蔽层 (用于抗电磁干扰)
- 抗干扰能力: 好
- 内导体越粗, 电阻越低, 传输过程中信号衰减越少, 传输距离越长 (成本越高)
- 应用: 早期局域网, 早期有线电视

光纤

- 纤芯 (高折射率) + 包层 (低折射率)
- 利用光的全反射特性, 在纤芯内传输光脉冲信号
- 抗干扰能力: 非常好 (光信号对电磁干扰不敏感)
- 优点: 信号传输损耗小, 长距离传输时中继器少, 很细, 节约布线空间 (中继器: 用于长距离传输时对衰减的信号进行整形, 放大)
- **多模光纤** MMF Multi-Mode Fiber
  - 纤芯更粗, 可同时传输多条光纤, 信号传输损耗更高, 适合较近距离传输
- **单模光纤** SMF Single-Mode Fiber
  - 纤芯更细, 直径小于一个波长, 只能传输一条光纤, 信号传输损耗低, 适合远距离传输

以太网对有线传输介质的命名规则

​	速度 + Base + 介质信息

- 10Base5: 10Mbps, 同轴电缆, 最远传输距离500m
- 10Base2: 10Mbps, 同轴电缆, 最远传输距离200m
- 10BaseF*: 10Mbps, 光纤. *可以是其他信息
- 10BaseT*: 10Mbps, 双绞线. *可以是其他信息

### 非导向型

无线传输

- 本质上都是电磁波, 满足 C=λF
- 频率越高, 数据传输能力越强
- 波长越短, 信号指向性越强, 信号越趋于直线传播
- 波长越长, 绕射性越好, 信号穿墙能力越强
- **长波**适合短距离, 非直线通信; **短波**适合短距离, 告诉通信, 若用于长距离则需要建立中继站; 短波信号指向性强, 要求信号接收器对准信号源

无线电波

- 穿透能力强, 传输距离长, 信号指向性弱
- 例如: 手机信号, WiFi

微波通信

- 频率带宽高, 信号执行性强, 保密性差 (容易被窃听)
- 例如: 卫星通信 (传播时延较大, 可用近地卫星群解决)

其他: 红外线通信, 激光通信 (信号指向性强)

### 物理层接口的特性

机械特性

- 指明接口所用接线器的形状和尺寸, 引脚数目和排列,  固定和锁定装置等
- 例如: 以太网网线接口的特性

电气特性

- 指明在接口电缆的各条线上出现的电压的范围, 传输速率, 距离限制等 (只有范围没有意义)

功能特性

- 指明某条线上出现的某一电平的电压的意义

过程特性 (规程特性)

- 指明对于不同功能的各种可能事件的出现顺序

## 物理层设备

### 中继器

**Repeater**

若传输距离太长, 数字信号会失真, 为了避免信号失真, 需要限制介质的传输长度. 为了延长传输长度, 需要使用**中继器**对信号整形再生.

只有两个**端口**. 通过一个端口接收信号, 将失真信号整形再生, 并转发至另一端口 (信号再生会产生一些时延)

仅支持**半双工通 信** (两端连接的结点不可同时发送数据, 会导致"冲突" (**全双工通信**: 两个方向的通信可以同时进行)

中继器两个端口对应两个**网段**.

例如, 物理层"电气特性"规定, 0.5-1.5V是低电平, 4.5-5.5V是高电平, 不符合此标准的信号视为无效中继器接收到信号后, 会将低电平整形为1V, 将高电平整形为5V, 然后再输出.

### 集线器

**Hub**

本质上是多端口中继器.

集线器将其中一个端口接收到的信号整形再生后, 转发到**所有**其他端口.

各端口连接的结点**不可同时**发送数据, 会导致"冲突"

集线器的N个端口对应N个网段, 各网段属于同一个**冲突域**

冲突域 (碰撞域)

- 如果两台主机同时发送数据会导致**冲突**, 则这两台主机处于同一个冲突域
- 处于同一冲突域的主机在发送数据前需要进行**信道争用**
- 集线器不能隔离冲突域

### 特性

集线器, 中继器不能无限串联

- 例如 10Base5 的5-4-3原则: 使用集线器/中继器连接10Base5网段时, 最多只能串联5个网段, 使用4台集线器/中继器, 只有3个网段可以挂接计算机.

集线器连接的各网段共享带宽

- 例如: 带宽为10Mbps的集线器, 连接8台主机, 每台主机平均只拥有1.25Mbps带宽

与教材冲突

- 集线器可以连接不同的传输介质, 因此两个网段的物理层接口特性可以不同 (这就意味着集线器连接的网段, 物理层协议可以不同)
- 集线器如果连接了速率不同的网段, 会导致所有网段"速率**向下兼容**
- 教材表述: 中继器, 集线器不能连接物理协议不同的网段, 也不能连接速率不同的网段